/**
 * 
 */
package com.tecnolpet.ot.service;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.sql.Timestamp;
import java.util.Date;
import java.util.List;

import org.apache.commons.codec.binary.Base64;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.PropertySource;
import org.springframework.context.annotation.PropertySources;
import org.springframework.core.env.Environment;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import com.tecnolpet.ot.constant.SotApp;
import com.tecnolpet.ot.model.Catalogo;
import com.tecnolpet.ot.model.Cliente;
import com.tecnolpet.ot.model.Enlace;
import com.tecnolpet.ot.model.PerfilEmpresa;
import com.tecnolpet.ot.repository.CatalogoRepository;
import com.tecnolpet.ot.repository.ClienteRepository;
import com.tecnolpet.ot.repository.PerfilEmpresaRepository;
import com.tecnolpet.ot.repository.SucursalRepository;
import com.tecnolpet.ot.seguridad.UsuarioAuthenticate;

/**
 * @author administrador
 *
 */
@Service
@PropertySources(value = { @PropertySource("classpath:/application.properties") })
public class ClienteService {

	@Autowired
	private ClienteRepository clienteRepository;
	@Autowired
	private Environment env;
	@Autowired
	private CatalogoRepository catalogoRepository;

	@Autowired
	private SucursalRepository sucursalRepository;

	@Autowired
	private PerfilEmpresaRepository perfilEmpresaRepository;

	public List<Cliente> getClientesActivos(UsuarioAuthenticate usuario) {
		PerfilEmpresa perfilEpresa = perfilEmpresaRepository.findOne(usuario
				.getPerfil_empresa());

		List<Cliente> clientes = clienteRepository.findByCatalogoAndEmpresa(
				catalogoRepository.findCatalogoBySigla("ACTIVO").get(0),
				perfilEpresa.getEmpresa());

		return clientes;
	}

	@Transactional
	public void guardar(Cliente cliente, UsuarioAuthenticate usuario) {
		Catalogo estado = catalogoRepository.findCatalogoBySigla(
				SotApp.EstadosGenerales.ACTIVO).get(0);
		PerfilEmpresa perfilEpresa = perfilEmpresaRepository.findOne(usuario
				.getPerfil_empresa());

		cliente.setCatalogo(estado);
		cliente.setEmpresa(perfilEpresa.getEmpresa());

		if (cliente.getLogoTmp() != null && !"".equals(cliente.getLogoTmp())) {
			cliente.setLogo_data(cliente.getLogoTmp());
			cliente.setLogo(convertLogo(cliente.getLogoTmp()));
		}else{
			
			cliente.setLogo_data("data:image/png;base64,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");
		}

		clienteRepository.save(cliente);
	}

	@SuppressWarnings("resource")
	private String convertLogo(String data) {

		String path = env.getProperty("ruta.file");
		StringBuilder newPath = new StringBuilder();
		StringBuilder newFileName = new StringBuilder();
		Date date = new Date();
		String dateStr;

		dateStr = new Timestamp(date.getTime()).toString().replace(" ", "")
				.replace(":", "").replace("/", "").replace("-", "")
				.replace(".", "");

		newFileName.append("logo").append("_").append(dateStr).append(".")
				.append("png");
		newPath.append(path).append("/").append(newFileName.toString());

		String imageData = data.substring(data.indexOf(",") + 1);

		Base64 decoder = new Base64();
		byte[] imgBytes = decoder.decode(imageData);
		FileOutputStream osf=null;
		try {
			osf = new FileOutputStream(new File(newPath.toString()));
			osf.write(imgBytes);
			osf.flush();
			System.out.println("ok");
		} catch (FileNotFoundException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

		return newFileName.toString();

	}

	@Transactional
	public void eliminar(final Cliente cliente) {
		Catalogo estado = catalogoRepository.findCatalogoBySigla(
				SotApp.EstadosGenerales.ELIMINADO).get(0);
		cliente.setCatalogo(estado);

		clienteRepository.save(cliente);
	}

	public List<Cliente> getClientesPorAtributos(String identificacion,
			String nombres, String apellidos, UsuarioAuthenticate usuario) {

		PerfilEmpresa perfilEpresa = perfilEmpresaRepository.findOne(usuario
				.getPerfil_empresa());

		List<Cliente> clientes = clienteRepository.findClienteAtributos("%"
				+ identificacion + "%", "%" + nombres + "%", "%" + apellidos
				+ "%", perfilEpresa.getEmpresa());

		return clientes;
	}

	public List<Enlace> getEnlacesByCliente(Integer idCliente) {

		Cliente cliente = clienteRepository.findOne(idCliente);

		return clienteRepository.findEnlacesByCliente(cliente);

	}

}
